{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://fluffyviz.dev/schemas/provider-config.json",
  "title": "FluffyViz Provider Configuration",
  "description": "Configuration for AI provider API keys and capabilities",
  "type": "object",
  "required": ["version", "providers"],
  "properties": {
    "version": {
      "type": "string",
      "description": "Configuration schema version",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "default": "1.0.0"
    },
    "providers": {
      "type": "object",
      "description": "AI provider configurations",
      "properties": {
        "openai": {
          "$ref": "#/definitions/providerConfig"
        },
        "anthropic": {
          "$ref": "#/definitions/providerConfig"
        },
        "cohere": {
          "$ref": "#/definitions/providerConfig"
        },
        "groq": {
          "$ref": "#/definitions/providerConfig"
        },
        "huggingface": {
          "$ref": "#/definitions/providerConfig"
        },
        "google": {
          "$ref": "#/definitions/providerConfig"
        },
        "mistral": {
          "$ref": "#/definitions/providerConfig"
        }
      },
      "additionalProperties": false
    },
    "defaults": {
      "type": "object",
      "description": "Default providers for different use cases",
      "properties": {
        "augmentation": {
          "type": "string",
          "description": "Default provider for column augmentation",
          "enum": ["openai", "anthropic", "cohere", "groq", "huggingface", "google", "mistral"]
        },
        "embedding": {
          "type": "string",
          "description": "Default provider for embeddings",
          "enum": ["openai", "cohere", "huggingface", "google", "mistral"]
        }
      }
    }
  },
  "definitions": {
    "providerConfig": {
      "type": "object",
      "required": ["apiKey", "enabled", "capabilities"],
      "properties": {
        "apiKey": {
          "type": "string",
          "description": "API key for this provider",
          "minLength": 1
        },
        "enabled": {
          "type": "boolean",
          "description": "Whether this provider is enabled"
        },
        "capabilities": {
          "type": "object",
          "description": "Enabled capabilities for this provider",
          "properties": {
            "text": {
              "type": "boolean",
              "description": "Text generation capability"
            },
            "embedding": {
              "type": "boolean",
              "description": "Text embedding capability"
            },
            "mmEmbedding": {
              "type": "boolean",
              "description": "Multimodal embedding capability"
            }
          },
          "required": ["text", "embedding", "mmEmbedding"],
          "additionalProperties": false
        },
        "baseUrl": {
          "type": "string",
          "description": "Optional custom base URL for API requests",
          "format": "uri"
        }
      },
      "additionalProperties": false
    }
  }
}
